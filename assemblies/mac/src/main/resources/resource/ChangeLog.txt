---------------
1.  WHAT's NEW
---------------
A list of changes in recent versions:

3.7.0:
       * Added more translations to previously hardcoded strings in the
         report designer and reporting engine.

       * Refactoring: Moved EllipsisButton down to LibSwing.

       * [BUG] PRD-2474: The array cell editor should have icons for its add
         and remove buttons.

       * [BUG] PDI-2840, PRD-2555: ResourceBundles must be loaded with the
         classloader that was used to load the library.

       * [BUG] PRD-2475: Parameter did not have a valid datatype computed in
         the metadata. With this fix, all parameter properties are available
         in the column metadata layer.

       * Increased the size of the left panel in the report-design-wizard
         by 10 pixel for SWT rendering.

       * The field-selector in LibFormula-UI now also shows icons for all the
         fields and thus makes it possible to differentiate between parameter
         formulas/expressions and datafactory fields.

       * [BUG] The structure tree cell renderer failed hard if it encounters
         datafactories that have no metadata.

       * [BUG] PRD-2639: Config-Editor shows all entries for a module
         in a seemingly random order and thus makes it hard to find the
         correct key to edit.

       * Schema-Definition contains parameter
       * Indexed access
       * parameter-encoding is configurable
       * Count by page renamed
       * Imagemap support added
       * Settings dialog in PRD
       * Publish Dialog cleanout
       * JDK 1.6 - JTabbedPane now a standard JTabbed pane with better MacOS
         support

       * PRD-2502: The build system now splits all lib-directories into
         internal and external directories so that dependency management
         inside a IDE becomes a bit easier.

       * PRD-2667: Update all startup scripts so that they contain either a
         JDK 1.6 reference (MacOS) or at least contain a warning that from
         now on JDK 1.6 is required to run the report designer.

       * [BUG] COMMONS-75: Mnemonics can be a empty string and must not
         fail.

       * [BUG] PRD-2684: In the parameter editor, the default-value should
         accept its input in the same format as given in the parameter
         dataformat text-field.

         In addition to the fix for PRD-3.6.1-GA, we now have a couple of
         new settings to control the default format strings for date/time
         and numeric types.

       * [API] CancelListener is now a real event listener. This caused
         changes in all datasource preview workers.

3.6.1-GA:
       * [BUG] PRD-2698: Previewing a report with parameters failed
         without a sensible error message if the parameters encountered
         an error. The plain-text preview did not even query for
         parameters and failed instantly when mandatory parameters were
         defined.

       * [BUG] PRD-2714: Using the select-all menu-item or the Menu+A
         shortcut also selected the page-band and thus did not allow to
         move elements around.

       * [BUG] PRD-2680: The list of supported output formats is now a
         list provided by the reporting engine. This reduces the chances
          of having invalid properties defined in this field.

       * [BUG] PRD-2433: Importing XLS files with irregular cell
         structures failed with a NullPointerException.

       * [BUG] PRD-2694: The shift-key as drag-selection enabler behaved
         badly as it was only recognized if the band editor had the focus.

       * [BUG] PRD-2699: The parameter editor dialog did not display the
         defined values for query, column-id or the display-value column
         if the database connection could not be established or if the
         referenced query was not found in one of the connections.

       * [BUG] PRD-2661: Th PreProcessor sample in the report-designer
         must use the correct SampleData connection.

       * [BUG] PRD-2684: In the parameter editor, the default-value should
         accept its input in the same format as given in the parameter
         dataformat text-field.

         If no format is given, the canonical ISO format is used.

       * PRD-2337: The generated MacOS bundle should have a user-friendly
         name. "Pentaho Report Designer" is so much better than
         "report-designer".

       * [BUG] PRD-2660, PRD-2659: Creating Kettle objects by invoking the
         public no-arg constructor generates invalid objects that cause
         errors in Kettle later. We have to manually match our object
         with one that is provided by Kettle's many public arrays, and
         then use the Kettle object (that has been initialized by some
         arcane magic or a spell of a dragon or so).

         This bug caused weird errors in the JDBC and Mondrian datasourc
         editor, which uses Kettle as metadata backend.

       * [BUG] PRD-2587: Need to disable HTML rendering, as this does not
         work in tables. Backported the GenericCellEditor to LibSwing.

3.6.1-RC1: (2010-04-29)
       * [BUG] PRD-2637: A ClassCastException occured after the last
         report has been closed. This was caused by a invalid model/
         tree path given while trying to restore the now invalid
         expand-nodes state.

       * [BUG] PRD-2633: The document-metadata editor must treat empty
         textfields as null values so that we remove empty titles from
         the report.

       * [BUG] PRD-2640: The Welcome pane did not have a keyboard handler
         on the tree and thus never allowed the user to open the reports
         by hitting Enter.

       * [BUG] PRD-2629: The various "Close" operations did not handle
         user-cancel requests properly and continued to close reports
         without permission.

       * [BUG] PRD-2628, PRD-2631: Save and Save As did not properly
         update the resource keys of "definition-source" and "content-base"
         and the assigned resource-manager to the possibly new prpt
         location. Therefore all bundle-internal resource references
         were lost and saving or running a modified report with embedded
         images or embedded resources failed.

       * [BUG] PRD-2633: The wizard needs to clear the document metadata
         when materializing a report from a template.

       * [BUG] PRD-2581: Group-header and -footer labels were not
         initialized correctly and thus grossly misbehaved.

       * [BUG] PRD-2599: The default-value editor in the parameter dialog
         was not updated correctly when selecting a new parameter class
         or when switching between single-selection and multi-selection
         parameter types.

       * [BUG] PRD-2614: Due to invalid internal events fired at the worst
         times we ended up creating resource keys that could not be embedded
         into the PRPT file when the report is saved. Thus saving the report
         failed.

       * [BUG] Cleaned out the Help->System Information dialog so that all
         the entries there are sorted. 

       * [BUG] Removed some unnecessary libraries that were brought in via
         IVY.

       * [BUG] PRD-2608: The metadata dialog did misbehave when it was resized
         and did not remember the last location of the XMI files it loaded.

       * [BUG] PRD-2604: A invalid attribute name was used when writing
         wizard-specification documents. Therefore loading the report later
         did not restore the name.

       * [BUG] PRD-2603: Removing extra template groups when generating a
         report from a wizard-template was not working properly.

       * [BUG] PRD-2597: The Display-Title for tabs and window-title-bar in
         the report-designer was computed in a wrong way.

       * [BUG] PRD-2496: A Date-CellEditor did not allow <null> values and
         thus it was impossible to unset a previously defined default value.

       * [BUG] When the first Group did not define a name, the group-selector
         in the table-editors became impossible to use.

       * [BUG] PRD-2453: When saving a report, we have to update the content
         base property of the report, so that relative paths can be resolved
         in the UI editor.

       * [BUG] PRD-2547: Copy&Paste of banded subreports converted the
         subreports into inline-subreports.

       * [BUG] PRD-2573: Translations in the publish dialog were missing and
         thus showing the error dialog on publish problems failed with a
         MissingTranslationException.

       * [BUG PRD-2520: Moving elements in the editor behaved badly as soon
         as a border was set. The layouter did not take borders into account
         and thus all subsequent operations produced bad results.

       * [API] PreviewParameterDialog in the engine now only accepts
         MasterReport objects, as they are the only ones that can carry
         external parameters.

       * [BUG] PRD-2561: The field selector in the style table was always
         empty, as the report designer context was never set.

       * [BUG] PRD-2540, BISERVER-4129: When publishing a report with
         non-ascii characters in the name, the report name was corrupted on
         the server. The server automatically recodes all HTTP-requests to
         the local system encoding and thus may break the encoding given by
         the report designer.

       * [BUG] PRD-2541: A invalid attribute was written when trying to
         define the group-totals-label.

       * [BUG] The Welcome-Pane showed empty directories as report files
         and subsequently tried to load them when the user double clicked
         on them.

       * [BUG] PRD-2493: Page-Align dialog did nothing after being confirmed
         by the user. This dialog is shown after the page format changed.

       * Pentaho Reporting now uses Kettle 4.0 and Mondrian 3.2 to be
         in sync with the latest BI-Server release.

       * Added a "report-designer.properties" file in the resources directory
         to make it more obvious for users where to put report-designer
         related configuration settings.

       * [BUG] AGILEBI-213, PRD-2460: The report-design-wizard should not show
         the environment variables or parameter fields in the field selector.

       * [BUG] PRD-2467: Templates used with RDW should have data connection
         defined as JNDI Sample Data

       * [BUG] PRD-2453: Resource linking always stored absolute paths
         in the generated resource-key. We need to prefer relative paths
         so that publishing or moving a report along with its images does
         not break the report.

       * [BUG] PRD-2446: Top-N-Analysis.prpt sample report was broken.

       * Updated all copyrights to the year 2010.
       
3.6.0:
       * [BUG] PRD-2435: Parameter messages must be localizable.

       * [BUG] PRD-2431: Date values were not editable in the table-editor
         and as default values in the parameter editor.

       * [BUG] PRD-2362: Search was broken in the product documentation viewer.

       * [BUG] Preview of data in the OLAP4J DataSource dialog did not work.

       * [BUG] PRD-2424: Reading text from CLOBs was not working due to an
         invalid index used in addressing offsets.

       * [BUG] PMD-DataSource and XPath datasource did not update text from
         the query-text area if the dialog was closed using a mouse, while
         the text-area had the focus.

       * [BUG] PRD-2417: Expressions to compute query-name, query-timeout
         and query-limit did not have access to the subreport-parameters.

       * [BUG] PRD-2409: There was a deadlock after editing a attribute or
         style expression due to a invalid sequence of events being fired.

       * [BUG] Trying to load images when IO-Errors or other unexpected
         errors happened during an asynchronous loading process could result
         in a deadlock. The AWT does not report the error state to the
         ImageObserver in all cases. We therefore now have a time-out for
         such cases.

       * [BUG] PRD-2413: A removed/changed datasource can lead to a
         NullPointerException when editing the datasource. This would render
         the edit-operation invalid, as a invalid tree-path was computed.

       * PRD-2421: Updated the JavaHelp documentation.

       * AGILEBI-146: Various layout fixes in the report-design-wizard

       * Changed the default-configuration for the inline editor of fields
         so that multi-line can be edited a lot easier. Use SHIFT-ENTER to
         begin a new line.

       * PRD-2406: Added the ability to compute the default value of a
         parameter. During the computation, the values of other parameters
         is undefined and can be null.

       * [BUG] PRD-2388: Kettle's internal variables were not fully initialized.
         We have to manually maintain the file-name of a transformation, as
         we use our own loader mechanism.

       * New formula-function to convert a string into a date with more control
         over the conversion operation.

         PARSEDATE([field]; "pattern"; "locale"; "timezone");
         PARSEDATE([field]; "pattern"; "locale");
         PARSEDATE([field]; "pattern");

       * [BUG] PRD-2360: Deleting all connection definitions from the JDBC
         datasource-dialogs instantly recreated these connections on the next
         start of PRD. We now initialize the preconfigured connections only
         once after a fresh installation.

       * [BUG] PRD-2401: LineSparklines did not save/parse the "Last-Color"
         property.

       * [BUG] Parsing dates in LibFormula used the 12-hours time format, and
         thus failed on many valid Timestamp and Time parse operations.

       * [BUG] PRD-2397: Parsing old *.report files failed when color-properties
         were used in functions.

       * [BUG] PRD-2396: Editing a value in the side-panel and selecting a other
         element or expression while the cell-editor was still active transfered
         the edited value to the new selection.

       * [BUG] PRD-2358: Mondrian parametrization was not working properly. The
         parameter specified a hierarchy. There are situations when multiple
         hiearchies use the same key (and Mondrian is configured to
         accept unqualified member names) that a random hierarchy is selected
         resulting in invalid or unexpected query results.

       * [BUG] PRD-2395: The lookup for bug-fix 2358 was broken.

       * [BUG] PRD-2400: The fix for PRD-2054 uncovered an other issue and broke
         the pagebreak rollback/commit functionality. Reports affected by that
         error could skip the printing of several rows of data.

       * [BUG] PRD-2228: On subreports with sticky page-headers in their parent
         reports, we did not use the correct set of data, and thus these headers
         showed invalid values or just <null>.

       * The default shell-scripts for Windows and Unix now pass all extra
         parameter into the report-designer. 

       * Parsing environment properties into arrays is now a generic feature
         and no longer limited to the "roles" array. To make that work, the
         environment mapping must have the "-array" suffix. Thus a
         mapping for "roles-array" will read the property "roles" and parse
         it into an array.

       * [BUG] PRD-2054: Page-Start event were fired in an incorrect order and
         thus messed up functions that depend on them (like the
         RowBandingFunction).

       * [BUG] Crosstab rendering in PRD was broken and thus the editor did
         not show the defined crosstab.

       * PRD-2387: Mondrian dies if it hits invalid roles. We therefore provide
         a filtering architecture that can provide either black- or white-
         listing capabilities for roles.

       * [BUG] PRD-2383: External changes to report-elements did not update the
         side-panel tables and thus the tables showed outdated values.

       * New formula-function: PARAMETERTEXT

         The function converts values into text that is suitable for creating
         parametrized URLs. The function encodes parameter values via
         URLEncoding. This encoding can be disabled via a function parameter
         if needed.

       * [BUG] PRD-2380: Editing Page-Spanning reports did not work as the
         PRD-rendering fed in invalid values.

       * Parameter values that are Dates or Numbers are now compared with a
         more relaxed algorithm and thus all equivalent values are accepted.

       * The parameter editor dialog is now reorganized to make it easier to
         create parameter.

       * Invalid values and validation errors are now shown in the Parameter-UI.

       * Both Mondrian and OLAP4J Datasources can now use the ${parameter}
         syntax for parametrization. Be aware that you have to valid the
         parameter properly as this kind of parametrization can lead to
         MDX-injections from malicious users.

       * New formula-function: IFNA

         This function is a shortcut for IF(ISNA([field]); <value>; [field]).

       * [BUG] PRD-2367: Date-Parsing was using a rather relaxed parse-algorithm
         and thus increased chances to mess up the parse-result.

       * PRD-2273: Editing values on multiple elements is easier now. Instead
         of showing <null>, we now always show the value of the first element
         that has been selected. Edit+Enter transfers that value to all elements.

       * PRD-2279: Re-enabled the alphabetical list view in the attribute and
         styles tables.

       * PRD-2276: A floating field-selector dialog has been added that makes
         it easier to drag fields into the report. It should also reduce the
         need to switch between the structure and data tabs.

       * [BUG] PRD-2358: Excel page-header and footer attributes were not
         correctly declared and thus never used.

       * All well-known Report-Environment properties show up as fields now.
         This way, they can be used as parameters in datasources or functions
         without having to resort to formula-parameter or expressions.

       * [Internal] Refactored the side-panel code so that it is less error
         prone and less complex.

       * PRD-2357: Opening a report now automatically hides the welcome-pane.

       * [BUG] PRD-2350: The crosstabbing did not work when a dataset was not
         fully normalized.

       * PRD-2355: After growing tired of searching for the functionality to
         make crosstabs show up in PRD, I moved this setting into the
         Preferences dialog and put a large warning around it.

       * [BUG] PRD-2356: The Insert-Crosstab action was not active on
         relational groups.

       * [BUG] PRD-2353: Crosstabs failed if executed as a subreport.

       * PRD-2343: The chart editor no longer shows the expression names
         or the "datasource" properties. The system manages these properties
         automatically now.

       * PRD-2352: The parameter-UI now honors the data-type when converting
         Strings into Dates or Numbers so that the correct sub-type is returned.

       * PRD-2084: Parameter now have a "data-format" attribute that can be used
         to format and parse input in the UIs. Be aware that this property is a
         UI only property and that values on a URL still need to be specified in
         the standard ISO format.

       * [BUG] PRD-2333: The distribution shipped with a bunch of invalid jars
         that are neither required nor requested. We now filter these dependencies
         out.

       * PRD-2278: We now remember the size and position of the swing preview
         dialog in PRD.

       * [BUG] Page-Setup did not trigger a repagination and thus it had no
         visible effect.

       * [BUG] PRD-2348: The alignment options dialog that shows up after a
         pageformat has been changed must offer a explicit "none" option. This
         is the same as closing the dialog via Cancel.

       * [BUG] PRD-2277: Most dialogs now react to the "ESC" key and act as
         if the "Cancel" button has been pressed.

       * [BUG] PRD-2262: Richtext parsing was wrong. It did not honor block-layout
         elements like paragraphs and thus messed up the line-breaks.

       * [BUG] PRD-2341: Invalid data in a JNDI connection definition rendered
         reports uneditable.

       * PRD-2345: We now ship with a sensible Mondrian-configuration.

       * [BUG] PRD-2344: XY-AreaLineChart did not work properly.

       * [BUG] PRD-2340: There was no <html::onmouseout> attribute declared in
         the metadata.

       * [BUG] PRD-2282: The selection in the tree and the focused root-band-editor
         were easily out of sync. Now we do our best to keep the focus in sync
         with the tree's selection.

       * [BUG] PRD-2322: The "anti-aliasing" style-key was not persisted.

       * [BUG] PRD-2259: The row-layout was messed up and caused
         IllegalStateExceptions when the vertical-alignment was set to "middle"
         or "bottom" and there was extra space to distribute.

       * [BUG] PRD-2324: A illegal offset caused that we never printed the page-footer
         in the table-pageable-mode.

       * [BUG] MacOS integration was broken as mutliple application-listeners
         on the same application do not work well. This caused "open" events to
         be swallowed.

       * PRD-2323: The sample-database is now a inmemory database and thus does not
         require any file-access at all.

       * [BUG] PRD-2325: Exports of Excel-Sheets with HREF-target text longer than
         256 characters caused errors on export. Excel has a hard limitation of
         256 characters per string-literal. If we encounter such overly long HREF
         we now ignore the HREF declaration.

       * [BUG] PRD-2321: Current working directory was not detected correctly if it
         contained spaces.

       * BISERVER-3765: Updated MySQL driver to 5.1.7.

       * PRD-2272: Create a default entry in the bundle for localization.
         This gives a nice little guideline for new users and matches the
         new default from the configuration.

       * PRD-2250: Introduced Sensible defaults for localizable reports.
         Report-resource-bundles now default to "translations"
         within the bundle. This default can changed via the report
         configuation.

         New reports created by the report-designer now always include a
         empty "translations.properties" file, which matches the default
         for the resource-bundle. Additional languages can be added by
         creating additional "translations_<lang>_<region>.properties"
         files.

       * PRD-2303: Allow users to specify the files that should be opened at
         startup on the commandline. At the moment, this does not work for
         Mac users using the Finder or the application-bundle.

       * PRD-2300: Env-Properties are now available as fields. Roles as array
         are now there as well.

       * Added some trim() calls to the query string to make the
         static-datasource easier to use.

       * PRD-2296: XYLineAreaChartExpression added. The expression was
         contributed by Roman.

       * PRD-2267: Updated the assembly for PRD to include sampledata and
         updated the default simple-jndi properties file to find that
         sampledata with a relative file path.

         This will remove our dependence on having a running sampledata
         database to demonstrate the samples.

       * PRD-1091: Added two new properties "categoryTitleFont" and
         "categoryTickFont" so that the font size and style of the category
         axis can be configured independently from the other labels.
         The old x-font is now known as "label-font" as it is the most
         generic font and serves as defaults to all other fonts. x-font
         now maps to "categoryTitleFont" and the new x-tick-font maps to
         "categoryTickFont".

       * PRD-2212: Added OLAP4J (Advanced) and Mondrian (Advanced) datasources.
         These datasources work exactly as the SQL (Advanced) datasource by
         allowing the query to be computed by a formula.

       * PRD-2266: BSH and BSF-expressions now also have access to the full
         expression runtime via the "runtime" bean.

       * PRD-2234: We now have a printingsystem-independent page-setup dialog.

       * Auto-Submit for parameters is now an attribute on the master-report.

       * Arrays can be normalized (converted from internal Sequence-type to
         Object[]) now, so that they can be used safely outside of a formula.
         TypeRegistry now also accepts java.util.Collections as sources for
         array and sequence objects.

       * UI beautification for Metal-PLAF: Now all button-panes define a
         minimum spacing between the buttons, so that they look at bit better.

       * Added support for SQL-date types for parameters. In addition to
         java.util.Date, we now also support java.sql.Date, java.sql.Time
         and java.sql.Timestamp.

       * PRD-917: Pie-Chart shadow-color and shadow-offset can be configured
         for both PieChartExpression and MultiPieChartExpression.

       * PRD-2207: Formulas can be used in parameters now. There are two
         formula types: Display-value computation for lists, and for all
         parameters a post-processor.

         The parameter-dialog now also has settings for relaxed
         parameter-validation and for hidden parameters.

       * PRD-2224: Relaxed the editor to be active on both *.properties files
         and files with a mime-type of "text/plain".

       * PRD-2235: CSVARRAYFUNCTION added. This function converts an CSV text
         into an array of strings.

       * Added a new demo report showing the use of report-preprocessors

       * PRD-2066: Providing a default log4j.xml so that editing the logging
         is easier. You can find this log4j.xml file in the resources
         directory of your PRD installation.

       * Parameter-Support added to OLAP4J (except for members and sets)

       * PRD-2077: Applied Pedro's patch and thus added set-member support
         to Modrian datasources

       * Config-Description-Editor now accepts the AbstractBoot as first argument,
         and therefore can edit other projects as well.

       * [BUG] Formula Designer now warns on invalid formulas. Formulas missing
         the equals sign or an valid context-selector are correctly detected
         as invalid.

       * [BUG] Added a sensible default configuration for EH-Cache to the
         report-designer.

       * [BUG] ReportEnvironmentDataRow no longer fails on missing roles

       * [BUG] Mondrian's OLAP4J driver fired a UnsupportedOperationException
         on non-implemented functions causing CellSet#close() to fail.

       * [BUG] PRD-2317: NPE on close of resultset and statement

       * [BUG] NPE on accessing childs of LibFormula's Term if the formula
         was not initialized with a context.

       * [BUG] Writing legacy-mondrian datasources failed due to invalid
         tagname

       * [BUG] PRD-2274: Finally we also cache the datasource objects we get
         from JNDI.

       * [BUG] PRD-2309: Horizontal-BarLine chart was not working, setting
         the "horizontal" flag had no effect.

       * [BUG] Fixed a NPE in CategorySetDataCollector when the series value
         was null. We now ignore rows in that case.

       * [BUG] Pentaho Metadata Data-Factory: DatabaseMeta object contains
         empty strings, and thus the JNDI authentication fails (as empty
         string is not null, which would be the indicator to use the default
         user and password).

       * [BUG] Added a very verbose warning to the LocalizedStringConceptMapper
         if a translation is requested by cannot be found. Hopefully that
         helps people to realize that we cannot display friendly names if
         they provide models with missing translations.

       * [BUG] PRD-2078: Opening reports with datasources that contained datasources
         that accessed unreachable hosts might lead to a hanging application.
         This is caused by a firewall that does not send "host-not-reachable"
         messages back, which tricks the connection into resending packages
         until a timeout is reached.

         Enabled the offline-mode in the menu and added the dreaded
         security manager. PRD now understands two new command line
         options:

           --offline (or -o for short)

         and

           --with-offline-mode-security-manager

         to enforce offline mode at startup and to force the installation
         of the security manager (for those who need it). The offline mode
         will still allow you to connect to "localhost".

       * [BUG] PRD-2308: We now ignore trailing semicolons (and only a single
         traling semicolon) when a formula is parsed. This fixes a issue with
         old PRD formulas where the beast would always add a semicolon to the
         formula, although this was invalid in the first place.

       * [BUG] PRD-2307: JDBC Statements were never closed explicitly.
         Now we close the statement as soon as the resultset is closed. If
         the result-set-tablemodel mode is "simple", the statement and
         resultset are closed as soon as the data has been copied out of
         the resultset. The resultset-mode can now be configured on a
         per-report basis.

       * [BUG] PRD-2306: Attribute-Expressions were not inspected, as we looked
         for them in the wrong spot.

       * [BUG] FormulaUtil must remove the formula-context before parsing the
         formula.

       * [BUG] PRD-2304: PRD may open in a unusable location when working with
         multiple screens and single screen configurations. We store the
         location of the application window when exiting the application,
         but when restoring the location on the next startup, we do not
         check whether these bounds are actually valid.

       * [BUG] PRD-2289: Text-Function needs to use the format string of the
         second parameter. For completeness, also added the message-function
         to make use of the Java-MessageFormat system.

       * [BUG] PRD-2222: Field-Selector Window was to small to be usable.

       * [BUG] PRD-2071: Datasource security settings must be runtime configurable

         Mondrian uses a "role" property to define the security level a user
         has. There are no commonly accepted rules on where the value for
         the role comes from, so we have to stay flexible by allowing the
         role to come from a field (sourced from a parameter, for instance).

         A similar problem set applies to JDBC user and password properties.

         SQL, Mondrian and OLAP4J datasources now have a new new security
         dialog to define these mappings.

       * [BUG] Removed the creepy "tuning" of JNDI names by searching for a
         backslash. If you dont want a backslash in your name, then dont
         specify it. "Auto-Correction" of user input is way to close to
         rewrite-on-publish functionality for me to feel compfortable.

       * [BUG] PRD-2291: Excel import failued due to NegativeArraySizeException,
         if we encountered row-records without cells.

       * [BUG] PRD-2287: Fixed a age-old issue with subreports. This also affects
         reports in PRD 1.7, 2.0 and 3.0.

         Reports with nested subreports sometimes affected the 'advanced' flag
         and thus tricked their parent reports into thinking that the end of
         the report has been reached. The report then skipped all subsequent
         content except the report-footers.

       * [BUG] Tab-naming in PRD did not take the bundle's properties into account.

       * [BUG] Fixed some coding errors in the CloseableTabbedPane. It did not
         override the "insertTab" method that really handles the tab-adding
         and thus ran into troubles if any of the other addTab methods were
         used. The implementation also always assumed that all icons were
         CloseTabIcons, but this is not true in all cases.

       * [BUG] PRD-2285: Unable to delete String-styles or string-properties by
         setting an empty string.

       * [BUG] PRD-1876: Inline-Editors must stop editing when they loose focus.

       * [BUG] PRD-2265: The static sheetname was not read in on parsing reports
         and thus was always empty.

       * [BUG] PRD-2219 Unable to run a parameterized report on the BI server.
         however, it work in RD.

         Numeric parameter values were validated using an overly strict algorithm
         which rejects values based on their class-type, even if they had the
         same numeric value.

       * [BUG] LibFormula: Use compareTo(..) method to compare big-decimals,
         as it does not create an extra big-decimal instance.

       * [BUG] PRD-2006: Stacked-XY-Chart (non-timeseries) failed.

       * [BUG] PRD-2031: OpenFromRepository can now only open valid files. The
         dialog's confirm-action wont allow illegal files or the selection
         of folders anymore.

       * [BUG] PRD-2261: Data-XML and Data-CSV outputs were broken due to a
         classcast-exception

       * [BUG] PRD-2249: No data-band was printed before the details-header band.
         Swapping the no-databand and details-header printing fixed this bug.

       * [BUG] PRD-2251: Master-Report's style- and attribute-expressions were
         never evaluated.

       * [BUG] PRD-2260: DocumentMetaData function is very verbose.

       * [BUG] PRD-2033: Fatal layouter errors no longer kill the UI-thread.
         The reports are nonetheless unlayoutable, but at least the user can
         now safely recover from the error and gets a sensible error message
         explaining the issue.

       * [BUG] Array-Editor dialog now follows the standard layout for table/list
         dialogs.

       * [BUG] PRD-2209: Was unable to delete more than one parameter when using the
         context-menu of the data-structure-tree. Now lets get rid of the
         DeleteParameterAction and use the ordinary DeleteAction for it.

       * [BUG] PRD-2206: Implemented a new PageSetup-Dialog that is independent
         of the printing subsystem. If you really want to go back to the old
         way, you can reenable it in the configuration.

       * [BUG] PRD-2247: Loading the bundle (for getting the metadata) failed.
         Therefore no metadata was available in the report.

       * [BUG] Added translations for report-pre-processors

       * [BUG] PRD-2245: Parameter-expansion fixed for callable statements.

       * [BUG] PRD-2246: Callable statements should not have parameter-
         expansion for array-parameters

       * [BUG] PRD-2242: add of InvalidFunctionCategory class to be used with
         DefaultFunctionDescription when a problem occurs while loading
         function category class

       * [BUG] PRD-2236: Not all buttons had a tooltip. This made it hard to
         tell what those funny pictures in the various dialogs actually
         do. All actions now have a short-description property set.

       * [BUG] Kettle and Mondrian: Browse-Dialog must use the parent-dialog
         and not the parent's parent dialog as parent.

       * [BUG] PRD-2239: move of DivideOperator.divide() to a more findable class
         (NumberUtil class). It is also remove a dependecy between the packages
         'function' and 'operator'.

       * [BUG] PRD-2243: Missing metadata for NormalizeArray formula function

       * [BUG] CSVTEXT description was incorrect.

       * [BUG] PRD-2233: Raw-Images are now stored as deflated bitmap data.
         This makes the PDF a bit smaller.

       * [BUG] PRD-2231: URLs given as strings are now correctly loaded when
         used in a image-element or image-field.

       * [BUG] PRD-1709: Edit-Groups changed to match mock-up.

       * [BUG] PRD-2056: Metadata was wrong for lineTickLabelFormat property.

       * [BUG] PRD-2230: Subreports with pre-processors (includes charts and
         wizard-aggregation) did not activate the pre-processor if the initial
         visibility was set to false.

       * [BUG] ExpressionEditorPane: Opening a dialog without passing the
         parent is a receipe for disaster later down the road.

       * [BUG] PRD-1988: Some work towards a better list-UI. The modified UI
         now behaves less weird with multi-selections and uses the same
         mouse-operations as any other JList one encounters in the UI.

       * [BUG] PRD-2220: Resource-Writer fixed. Images added in banded
         subreports were not correctly serialized into bundle-files. This
         sometimes corrupted the files.

       * [BUG] PRD-2216: ValueFunction: wrong FunctionCategory was returned

       * [BUG] PRD-2210: PublishSetting-defaults are now only stored in the
         configuration. Use "report-designer.properties" in a suitable
         location to override the defaults.

       * [BUG] We now use hovering buttons to keep the clean appearance
         of the UI, while at the same time giving the user feedback that the
         funny pictures are actually buttons that can be pressed.

       * [BUG] Chart-Expression's isItemsLabelVisible for a java.lang.Boolean
         object confuses the Bean-Inspector. Make it a "getItemsLabelVisible"
         or parsing the XML files fails.

       * [BUG] PRD-1702: The property-editor-dialog had no title. Nowe we set
         a generic title for the property-editor-dialog.

       * [BUG] OLAP4J: Removed the catalog-file-textfield, as it interferes
         with the properties defined in the connection itself.

       * [BUG] Connection-Definitions in the JDBC and Mondrian datasource
         editor were not removed until we called flush on the parent.

       * [BUG] Fixing the error-reporting of the JDBC dialog to use the
         standard Exception-Dialog.

       * [BUG] Filtered out the INFORMATION_SCHEMA of HSQL, as this schema-selection
         dialog starts to anoy me.

       * [BUG] PRD-537: Changes to the Unit did not trigger a repaint in the
         lineals.

       * [BUG] PRE-533: A empty formula no longer causes parse-errors. If
         neither class nor formula are given, we create a empty formula-
         expression instead.

       * [BUG] PRD-2067: To make mondrian cache the schema, we have to make
         sure we always pass the very same instance of the DataSource to
         Mondrian, as Mondrian uses the system-identity hashcode for caching
         purposes.

         We now actively cache the datasource-objects that were returned from
         the JNDI system and actively cache the datasources that were created
         manually.

       * [BUG] LibRepository: Fixing a stack-overflow caused by a looping data
         structure. Instead of comparing the bundle-key, which contains a
         reference to the bundle-loader, we now compare the underlying
         repository, which is equally correct.

       * [BUG] PRD-1939: ItemLabelVisible flag is now a tri-state between
         true, false and undefined. This way, we can have a sensible default
         behaviour that is different for each chart-type even when switching
         between chart-types in the editor.

       * [BUG] PRD-2202: Named-Parameters for Kettle-Datasources was broken.

       * [BUG] PRD-1986: Added some minimum-sizing so that text-fields dont
         look so horrible anymore.

       * [BUG] PRD-2072: Caching was not working correctly for loaded
         resources causing numerous stale entries in the cache.

       * [BUG] Mnemonics and keystrokes are no longer mandatory. If the translation
         contains an empty string, we just skip that part.

       * [BUG] PRD-2073: Reworked the Date-Input so that the text-field is actually
         used for monitoring changes. Also cleaned up the UI so that we now
         use buttons for what is used as buttons (as labels are not accessible
         via keyboard).

         Fixed the date-chooser-panel so that the today-button also fires a
         property-change event.

       * [BUG] PRD-2076: Disabled metadata defaults for Mondrian and OLAP4J, as it
         is fairly uncommon to have a formatstring-property in a query. This
         change only affects the defaults created by PRD, you can still
         enable metadata handling by setting the flags to true in the
         element's attributes.

       * [BUG] PRE-531: Quote-handling inside references was wrong. Quotes were not
         safely stripped off.

       * [BUG] PRD-2070: Report-Designer needs to pay special attention when
         inserting subreports or bands, or we create invalid content.

       * [BUG] PRD-2070: Metadata-parser had a bug that prevented the container-flag
         to be set.

       * [BUG] Date- and NumberFields had no checks for invalid format-strings and
         thus crashed on errors.

       * [BUG] PRD-2036: Report Wizard loses state when changing template from winter
         to pentaho

       * [BUG] PRD-2058: Report Wizard: date formatting causes report to fail to
         preview.

       * [BUG] PRD-2053: Report processing failed with an IllegalStateException as
         PageFooter sections cannot be reused interally when we believe they
         are empty.

       * [BUG] PRD-2240: Refactoring; move of NumberSequence to its parent package


3.5.0:
       * Report-Designer was rewritten from scratch. Please refer to the JIRA
         system at http://jira.pentaho.com/browse/PRD to see a list of changes
         made to the Citrus-Releases.

